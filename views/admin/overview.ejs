<div class="text-3xl font-bold pb-8">
    Adminland
</div>

<div class="grid grid-cols-3 divide-x-2 divide-black">
    <div>
        <span class="text-2xl font-bold">
            Users
        </span>

        <table id="user_table" class="stripe">
            <thead>
                <tr>
                    <th>
                        Name
                    </th>
                    <th>
                        Role
                    </th>
                </tr>
            </thead>

            <tbody>
            <% for (const siteUser of users) { %>
                <tr>
                    <td>
                        <%= siteUser.name %>
                    </td>
                    <td>
                        <form action="" method="post">
                            <input type="hidden" value="<%= siteUser.id %>" name="userId">
                            <select required name="role" onchange="submit(this);" class="form-select appearance-none
                                  block
                                  w-full
                                  px-6
                                  py-1.5
                                  mb-3
                                  text-base
                                  font-normal
                                  text-gray-700
                                  bg-white bg-clip-padding bg-no-repeat
                                  border border-solid border-gray-300
                                  rounded
                                  transition
                                  ease-in-out
                                  m-0
                                  focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none">
                                <option value="STUDENT" <% if (siteUser.role === 'STUDENT') { %> selected <% } %>>
                                    Student
                                </option>
                                <option value="INSTRUCTOR" <% if (siteUser.role === 'INSTRUCTOR') { %> selected <% } %>>
                                    Instructor
                                </option>
                                <option value="ADMIN" <% if (siteUser.role === 'ADMIN') { %> selected <% } %>>
                                    Admin
                                </option>
                            </select>
                        </form>
                    </td>
                </tr>
            <% } %>
            </tbody>
        </table>

    </div>

    <div>
        <span class="text-2xl font-bold">
            Sites
        </span>
        <!-- - List of sites and button to make a new one-->
    </div>

    <div>
        <span class="text-2xl font-bold">
            Sections
        </span>
        <!-- - List of sections and button to make a new one-->
    </div>
</div>

<script>
    submit = (select) => {
        const form = select.form;
        form.submit();
    }

    $(document).ready( function () {
        $('#user_table').DataTable();
    });
</script>
